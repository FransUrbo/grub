From 901f9c3dfb7bd2954b6351e3b086e07d14f2d66c Mon Sep 17 00:00:00 2001
From: Mario Limonciello <Mario_Limonciello@dell.com>
Date: Mon, 13 Jan 2014 12:12:59 +0000
Subject: Build part_msdos and vfat into EFI boot images

Author: Colin Watson <cjwatson@ubuntu.com>
Bug-Ubuntu: https://bugs.launchpad.net/bugs/677758
Forwarded: http://lists.gnu.org/archive/html/grub-devel/2011-01/msg00028.html
Last-Update: 2013-12-25

Patch-Name: mkrescue_efi_modules.patch
---
 util/grub-mkrescue.c | 6 ++++++
 1 file changed, 6 insertions(+)

Index: grub/util/grub-mkrescue.c
===================================================================
--- grub.orig/util/grub-mkrescue.c	2014-11-16 18:33:36.000000000 +0100
+++ grub/util/grub-mkrescue.c	2015-02-05 16:17:31.738425440 +0100
@@ -657,6 +657,9 @@
       make_image_fwdisk_abs (GRUB_INSTALL_PLATFORM_IA64_EFI, "ia64-efi", imgname);
       free (imgname);
 
+      grub_install_push_module ("part_msdos");
+      grub_install_push_module ("fat");
+
       grub_install_push_module ("part_apple");
       img64 = grub_util_path_concat (2, efidir_efi_boot, "bootx64.efi");
       make_image_fwdisk_abs (GRUB_INSTALL_PLATFORM_X86_64_EFI, "x86_64-efi", img64);
