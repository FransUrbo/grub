Description: Suppress "GRUB loading" message unless Shift is held down
 Upstream doesn't want this, as it makes debugging harder.  Ubuntu wants it
 to provide a cleaner boot experience.
Author: Colin Watson <cjwatson@ubuntu.com>
Forwarded: not-needed
Last-Update: 2012-09-06

Index: grub/grub-core/boot/i386/pc/boot.S
===================================================================
--- grub.orig/grub-core/boot/i386/pc/boot.S	2013-12-27 17:01:35.190567267 +0100
+++ grub/grub-core/boot/i386/pc/boot.S	2013-12-27 17:01:35.770567279 +0100
@@ -18,6 +18,7 @@
  */
 
 #include <grub/symbol.h>
+#include <grub/machine/memory.h>
 #include <grub/machine/boot.h>
 #ifdef QUIET_BOOT
 #include <grub/machine/memory.h>
Index: grub/grub-core/boot/i386/pc/diskboot.S
===================================================================
--- grub.orig/grub-core/boot/i386/pc/diskboot.S	2013-12-27 17:01:35.194567267 +0100
+++ grub/grub-core/boot/i386/pc/diskboot.S	2013-12-27 17:02:00.902554109 +0100
@@ -17,6 +17,7 @@
  */
 
 #include <grub/symbol.h>
+#include <grub/machine/memory.h>
 #include <grub/machine/boot.h>
 #ifdef QUIET_BOOT
 #include <grub/machine/memory.h>
@@ -27,6 +28,7 @@
  */
 
 #define MSG(x)	movw $x, %si; call LOCAL(message)
+#define SILENT(x)	call LOCAL(check_silent); jz LOCAL(x)
 
 #ifdef QUIET_BOOT
 #define SILENT(x)	call LOCAL(check_silent); jz LOCAL(x)
